$("body").on("click","[data-media-widget]",function(a){a.preventDefault();var b=$(this);a=b.data("mediaWidget");var c=$("#"+b.data("modalTarget"));c.find(".modal-title").text(b.data("modalTitle"));var f=c.find(".modal-body").empty(),d={},e="";"alt-translations"===a?(e="/media/media/ajax-alt-update?id="+b.data("id"),d.showLanguages=b.data("showLanguages")):"image-tools"===a&&(e="/media/media/ajax-image-tools?id="+b.data("id"),d.thumbstyle=b.data("thumbstyle"));$.ajax({url:e,method:"POST",data:d}).done(function(a){f.html(a);
  c.modal({backdrop:b.data("modalBackdrop")})})});
$("body").on("submit",".media-modal-form",function(a){a.preventDefault();a=$(this);var b=a.parents(".modal"),c=a.parents(".modal-body");$.post($(a).attr("action"),$(a).serialize()).done(function(a,d,e){a.hasOwnProperty("success")||a.hasOwnProperty("error")?(d=a.hasOwnProperty("success")?'<div class="text-success">'+a.success+"</div>":'<div class="text-danger">'+a.error+"</div>",c.html(d),setTimeout(function(){c.empty();b.modal("hide")},1500),a.hasOwnProperty("refreshThumbnail")&&(a=document.getElementById("mediafile-"+
  a.id).querySelector("img"),a.setAttribute("src",a.getAttribute("src")+"?"+(new Date).getTime()))):c.html(a)})});$(".modal").on("shown.bs.modal",function(){var a=document.getElementById("imgContainer"),b=document.getElementById("image"),c=a.getBoundingClientRect().width;b.setAttribute("style","max-width:"+c+"px;max-height:"+c+"px");a.setAttribute("style","min-height:"+c+"px")});
$("body").on("click","#rotate-image",function(a){a.preventDefault();inputDeg=document.querySelector('input[name="image-rotate-deg"]');a=parseInt(inputDeg.value);newDeg=a+90;360===newDeg?(inputDeg.value=0,imgContainer.classList.remove("rotate270")):(imgContainer.classList.remove("rotate"+a),imgContainer.classList.add("rotate"+newDeg),inputDeg.value=newDeg)});
